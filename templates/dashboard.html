{% extends 'base3.html' %}
{% load static %}

{% block content %}
<body>

<div class="container rounded   mt-2 " style="background-color:#2d2a2a">
    <div class="row  text-center ">
        <div class="col my-3">
            <h3 class="text-white"> Ola {{ user.username }} ! </h3>
            <h2 class="text-white" style="font-family: 'Chau Philomene One'">Lista de shows:</h2>
        </div>
    </div>

    <div class="container  " style="background-color:#1e1e1d">
        <div class="row w-100 my-2 ">
            {% for evento in eventos %}
<!--            IMAGEM DO INGRESSO-->
            <div class="col-lg-5 col-sm-11  w-100 m-4 " style="background-image:
             url(static/ticket.png); background-repeat: no-repeat;background-size: 100%;">
<!--      FIM IMAGEM DO INGRESSO-->
                <div class="container ">
                    <br class="d-none d-md-block d-lg-none ">
                    <div class="row">

                        <div class=" col-sm-2 d-none d-md-block d-lg-none"></div>
<!--                        IMAGEM QUADRADA-->
                        <div class="col-lg-6 col-sm-4 "></div>
                         {% if evento.lista_reserva.ticket %}


                        <div class="d-none d-md-block d-lg-none" style='position:absolute; top:80px; left:140px;'>
                            <img src="{{ evento.lista_reserva.ticket.url }}" class="img-fluid " style="float:rigth;width:150px">
                        </div>

                        <div class="d-none d-lg-block" style='position:absolute; top:60px; left:100px;'>
                            <img src="{{ evento.lista_reserva.ticket.url }}" class="img-fluid " style="float:rigth;width:120px">
                        </div>
                        {% else %}
<!--                                CELULAR-->
                        <div class="d-none d-md-block d-lg-none " style='position:absolute; top:100px; left:140px;'>
                            <img src="{% static 'hocusticket.png' %}" class="img-fluid " style="float:rigth;width:150px">
                        </div>

                        <div class="d-none d-lg-block" style='position:absolute; top:65px; left:100px;'>
                            <img src="{% static 'hocusticket.png' %}" class="img-fluid " style="float:rigth;width:120px">
                        </div>
                        {% endif %}
<!--                     FIM IMAGEM QUADRADA-->
                        <div class="col-lg-6 col-sm-5 my-1 text-center ">
                            <br><br>
<!--                            DADOS DO SHO TITULO, DATA, HORARIO, VALOR -->

<!--                            tela PC-->
                            <div class="d-none d-lg-block">
                                <h3 class="text-danger" style="font-family: 'Chau Philomene One'">
                                {{ evento.lista_reserva.titulo_show }}</h3>
                                <h5 class=" mx-1" style="font-family: 'Chau Philomene One'">{{ evento.lista_reserva.data_do_show|date:"SHORT_DATE_FORMAT" }} | {{ evento.lista_reserva.horario_do_show }} <br> {{ evento.lista_reserva.data_do_show|date:"l" }}
                                </h5>{% if evento.lista_reserva.valor %}

                                <div class="text-danger h5 my-3" style="font-family: 'Chau Philomene One'"> R${{ evento.lista_reserva.valor }}</div>
                                {% else %}
                                <div style="margin-bottom: 60px"></div>
                                {% endif %}
                            </div>
<!--                            CELULAR-->

                            <div class="d-none d-md-block d-lg-none">
                                <h2 class="text-danger" style="font-family: 'Chau Philomene One'">
                                {{ evento.lista_reserva.titulo_show }}</h2>
                                <h4 class=" mx-1" style="font-family: 'Chau Philomene One'">{{ evento.lista_reserva.data_do_show|date:"SHORT_DATE_FORMAT" }} | {{ evento.lista_reserva.horario_do_show }} <br> {{ evento.lista_reserva.data_do_show|date:"l" }}
                                </h4>{% if evento.lista_reserva.valor %}

                                <div class="text-danger h4 my-3" style="font-family: 'Chau Philomene One'"> R${{ evento.lista_reserva.valor }}</div>
                                {% else %}
                                <div style="margin-bottom: 60px"></div>
                                {% endif %}
                            </div>

<!--                            FIM, DATA, HORARIO, VALOR -->
                            <br><br class="d-none d-md-block d-lg-none "><br
                                class="d-none d-md-block d-lg-none "><br class="d-none d-md-block d-lg-none ">
<!--                            Carimbo PAGO-->
                            {% if evento.pagamento %}
<!--                           tela grande -->
                            <div class="d-none d-lg-block" style='position:absolute; top:150px; left:130px;'>
                                <img src="{% static 'ico_pag.png' %}" class="img-fluid "
                                     style="float:rigth;width:60px">
                            </div>
                            <div class="d-none d-sm-block d-lg-none" style='position:absolute; top:150px; left:130px;'>
                                <img src="{% static 'ico_pag.png' %}" class="img-fluid "
                                     style="float:rigth;width:100px">
                            </div>
                            {% endif %}
<!--                         FIM Carimbo PAGO-->
                        </div>
                        <div class="col-1"></div>
                    </div>

                </div>
                <div class="d-flex justify-content-center">

                    {% if evento.lista_reserva.pix %}

                    {% if evento.comprovante %}
                    <!-- Button Modal -->
                    <button type="button" class="btn btn-danger m-4" data-toggle="modal"
                            data-target="#botao{{ evento.lista_reserva.id }}">
                        Confira seu comprovante
                    </button>
                    {% else %}

                    <!-- Button Modal -->
                    <button type="button" class="btn btn-danger m-4" data-toggle="modal"
                            data-target="#botao{{ evento.lista_reserva.id }}">
                        Pague com Pix
                    </button>
                    {% endif %}
                    {% endif %}
                </div>

            </div>


            {% endfor %}
        </div>

        {% for evento in eventos %}


        <!-- Modal -->
        <div class="modal fade  " id="botao{{ evento.lista_reserva.id }}" tabindex="-1" role="dialog"
             aria-labelledby="{{ evento.lista_reserva }}Label" aria-hidden="true">
            <div class="modal-dialog modal-lg " role="document">
                <div class="modal-content text-center">
                    <div class="modal-header">

<!--                        <h4 class="modal-title text-center " id="{{ evento.lista_reserva }}Label">{{ evento.lista_reserva }}</h4>-->
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body p-4">
                        <div class="row">
                        <div class=" col-5 text-left border p-1">
                            <h2>HOCUS PIX</h2>
                            <h5 class="b"> Show selecionado: </h5>
                            <h5>{{ evento.lista_reserva }} </h5>
                            <h5 class="b"> Data: </h5>
                            <h5>{{ evento.lista_reserva.data_do_show|date:"SHORT_DATE_FORMAT" }} </h5>

                            <div class="container bg-light mt-5 p-2">
                                <h5 class="b">Para comprar seu ingressso, <br> faça um Hocus Pix:</h5>
                                <br>
                                <h1 class="d-none d-lg-block">000.000.000-00</h1>
                                <h5 class="d-none d-md-block d-lg-none">000.000.000-00</h5>
                            </div>
                        </div>


                        <div class="col-6 text-left  ml-2">
                            <div class="border p-2">
                                <h5 class="b"> Status Pagamento: </h5><br>
                                {% if evento.comprovante %}
                                {% if evento.pagamento %}
                                <h6 class="text-muted"> <i class="fa fa-circle-o" aria-hidden="true"></i>Aguardando comprovante </h6>
                                <h6 class="text-muted"> <i class="fa fa-circle-o" aria-hidden="true"></i>Aguardando confirmação </h6>
                                <h6 class="text-success"><i class="fa fa-circle" aria-hidden="true"></i>Pagamento confirmado</h6>
                                {% else %}
                                <h6 class="text-muted">  <i class="fa fa-circle-o" aria-hidden="true"></i> Aguardando comprovante</h6>
                                <h6 class="text-warning">  <i class="fa fa-circle" aria-hidden="true"></i> Aguardando confirmação</h6>
                                <h6 class="text-muted">  <i class="fa fa-circle-o" aria-hidden="true"></i> Pagamento confirmado</h6>
                                <br>
                                {% endif %}
                                {% else %}
                                <h6 class="text-danger"> <i class="fa fa-circle" aria-hidden="true"></i>Aguardando comprovante </h6>
                                <h6 class="text-muted"> <i class="fa fa-circle-o" aria-hidden="true"></i>Aguardando confirmação </h6>
                                <h6 class="text-muted"><i class="fa fa-circle-o" aria-hidden="true"></i>Pagamento confirmado</h6>
                                <br>
                                {% endif %}
                            </div>

                                <!--Simple Form-->
                                <div class="border mt-3 p-2">
                                    <h5 class="b"> Envie seu comprovante: </h5>
                                    <form action="{% url 'upload_comprovante' %}" method="post" enctype="multipart/form-data">
                                        {% csrf_token %}

                                        <input type="hidden" name="id" value="{{ evento.id }}">

                                        <input type="file" name="imagem" accept="image/*" required>
                                        <br>

                                        <button class="btn btn-dark my-4" type="submit">Enviar</button>
                                    </form>


                                    <!--See Image Uploaded-->
                                    <h2 class="my-4">Comprovante</h2>

                                        {% if evento.comprovante %}
                                    <div class=" container">
                                        <img src="{{ evento.comprovante.url }}" class="img-fluid">
                                        <br>
                                        <a class="btn btn-dark my-4" href="/">Pagina Inicial</a>
                                        {% else %}
                                        <p>Sem comprovante.</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <br>
    </div>

    {% endfor %}

</div>
{% endblock %}
</body>
